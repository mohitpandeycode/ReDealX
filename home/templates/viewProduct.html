{% extends 'base.html' %}
{% load static %}
{% block title %}
  View-Product
{% endblock %}

{% block css %}
  <style>
    .user-card-full {
      overflow: hidden;
    }
    
    .card {
      border-radius: 5px;
      -webkit-box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08);
      box-shadow: 0 1px 20px 0 rgba(69, 90, 100, 0.08);
      border: none;
      margin-bottom: 30px;
    }
    
    .user-card-full .user-profile {
      border-radius: 5px 0 0 5px;
    }
    
    .bg-c-lite-green {
      background: -webkit-gradient(linear, left top, right top, from(#f29263), to(#ee5a6f));
      background: linear-gradient(to right, #ee5a6f, #f29263);
    }
    
    .img-radius {
      border-radius: 5px;
    }
    
    h6 {
      font-size: 14px;
    }
    
    .information {
      display: flex;
      align-items: center;
      justify-content: space-around;
    }
    
    .crouselbox {
      margin: auto;
      width: 100%;
      height: 60vh;
    }
    
    .crouselimage {
      object-fit: contain;
      width: 100%;
      height: 60vh;
      background-color: black;
    }
    
    .carousel {
      margin: 20px auto;
      width: 80%;
    }
    
    .card {
      border: none;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .card-header {
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }
    
    .detail-section h5 {
      font-weight: bold;
      color: #495057;
    }
    
    .text-muted-custom {
      font-size: 0.95rem;
      color: #6c757d;
    }
    
    @media screen and (max-width: 768px) {
      .crouselbox {
        height: 30vh;
      }
    
      .crouselimage {
        height: 30vh;
      }
    
      .carousel {
        width: 95%;
      }
    }
  </style>
{% endblock %}

{% block body %}
  <!-- Navbar Start -->
  {% include 'navbar.html' %}
  <!-- Navbar end -->
  <!-- start view product -->
  <!-- Image crousel start -->
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    {% for image in product.images.all %}
      <div class="carousel-indicators">
        {% if image.image1 %}
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        {% endif %}
        {% if image.image2 %}
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
        {% endif %}
        {% if image.image3 %}
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
        {% endif %}
        {% if image.image4 %}
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button>
        {% endif %}
      </div>
      <div class="carousel-inner crouselbox">
        {% if image.image1 %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <img src="{{ image.image1.url }}" class="d-block crouselimage" alt="..." />
          </div>
        {% endif %}
        {% if image.image2 %}
          <div class="carousel-item">
            <img src="{{ image.image2.url }}" class="d-block crouselimage" alt="..." />
          </div>
        {% endif %}
        {% if image.image3 %}
          <div class="carousel-item">
            <img src="{{ image.image3.url }}" class="d-block crouselimage" alt="..." />
          </div>
        {% endif %}
        {% if image.image4 %}
          <div class="carousel-item">
            <img src="{{ image.image4.url }}" class="d-block crouselimage" alt="..." />
          </div>
        {% endif %}
      </div>
    {% endfor %}

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <!-- Image crousel end -->

  <!-- product details section start -->
  <div class="container mt-5">
    <div class="card">
      <!-- Header -->
      <div class="card-header bg-primary text-white text-center py-3">
        <h5 class="text-light mb-0">Product Details</h5>
      </div>

      {% if product %}
        <!-- Card Body -->
        <div class="card-body p-4">
          <!-- Flex Row for Product and Seller Details -->
          <div class="row d-flex flex-wrap">
            <!-- Product Details Section -->
            <div class="col-12 col-md-6">
              <div style="overflow: auto; height: 500px;" class="p-3 border-end">
                <h2 class="text-dark mb-3 fw-bold">â‚¹ {{ product.price }}</h2>
                <h4 class="text-uppercase fw-bold text-dark">{{ product.title }}</h4>
                <h5 class="text-muted-custom mb-2">Brand: {{ product.brand }}</h5>
                <p class="text-muted-custom">
                  <strong>Category:</strong> {{ product.category }}
                </p>
                <p class="text-muted-custom">
                  <strong>Published at:</strong> {{ product.created_at|date:'d M Y' }} <strong>{{ product.created_at|date:'h:i A' }}</strong>
                </p>
                <h5 class="mt-3">Description</h5>
                <p>{{ product.description }}</p>
                <h5>Posted in</h5>
                <p>{{ product.location }}</p>
              </div>
            </div>

            <!-- Seller Details Section -->
            <div class="col-12 col-md-6">
              <hr />
              <div class="page-content mt-3" id="page-content">
                <div class="row d-flex justify-content-center">
                  <div class="col-12" style="overflow: auto; height: 450px;">
                    <div class="card user-card-full">
                      <div class="row align-items-center g-0">
                        <!-- Profile Picture -->
                        <div class="col-4 bg-c-lite-green user-profile d-flex justify-content-center align-items-center">
                          <div style="width: 100px; height: 100px;" class="text-center text-white">
                            <img src="https://static.vecteezy.com/system/resources/previews/026/418/808/large_2x/man-head-user-profile-character-free-png.png" class="img-fluid img-radius" alt="User Profile Image" />
                          </div>
                        </div>
                        <!-- User Information -->
                        <div class="col-8">
                          <div class="px-3">
                            <h3 class="mb-0 text-dark fw-bold">{{ product.seller.first_name }} {{ product.seller.last_name }}</h3>
                            <p class="text-muted small mb-2">Seller</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="text-center my-3 d-flex justify-content-center gap-4">
                      <a href="tel:{{ product.seller.phone_number }}" class="btn btn-dark px-4 py-2"><i class="fas fa-phone-alt"></i> Call</a>
                      <a href="mailto:{{ product.seller.email }}" class="btn btn-primary px-4 py-2"><i class="fas fa-envelope"></i> Message</a>
                    </div>
                    <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d14027.749949282572!2d77.52581119999999!3d28.4814292!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sin!4v1736462469341!5m2!1sen!2sin" class="w-100 h-100" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Call to Action -->
      {% endif %}
    </div>
  </div>

  <!-- product details section end -->
{% endblock %}
